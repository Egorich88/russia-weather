#!/usr/bin/env python3
from prometheus_client import start_http_server, Gauge
import time
import random

CITIES = {
    "–î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫": [
        "–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π", "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫", "–•–∞–±–∞—Ä–æ–≤—Å–∫",
        "–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫", "–ú–∞–≥–∞–¥–∞–Ω", "–ê–Ω–∞–¥—ã—Ä—å",
        "–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫-–Ω–∞-–ê–º—É—Ä–µ", "–ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫", "–¢—ã–Ω–¥–∞"
    ],
    "–°–∏–±–∏—Ä—å": [
        "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫", "–ò—Ä–∫—É—Ç—Å–∫", "–û–º—Å–∫",
        "–¢–æ–º—Å–∫", "–ë–∞—Ä–Ω–∞—É–ª", "–ö–µ–º–µ—Ä–æ–≤–æ", "–Ø–∫—É—Ç—Å–∫"
    ],
    "–£—Ä–∞–ª": [
        "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–ß–µ–ª—è–±–∏–Ω—Å–∫", "–ü–µ—Ä–º—å", "–£—Ñ–∞",
        "–¢—é–º–µ–Ω—å", "–ú–∞–≥–Ω–∏—Ç–æ–≥–æ—Ä—Å–∫"
    ],
    "–¶–µ–Ω—Ç—Ä": [
        "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥", "–ö–∞–∑–∞–Ω—å",
        "–°–∞–º–∞—Ä–∞", "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É", "–í–æ—Ä–æ–Ω–µ–∂", "–í–æ–ª–≥–æ–≥—Ä–∞–¥"
    ],
    "–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥": [
        "–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥", "–ú—É—Ä–º–∞–Ω—Å–∫", "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫"
    ],
    "–ö—Ä—ã–º": [
        "–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å", "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å", "–ö–µ—Ä—á—å", "–Ø–ª—Ç–∞", "–§–µ–æ–¥–æ—Å–∏—è",
        "–ï–≤–ø–∞—Ç–æ—Ä–∏—è", "–ê–ª—É—à—Ç–∞", "–°–∞–∫–∏", "–î–∂–∞–Ω–∫–æ–π", "–ë–∞—Ö—á–∏—Å–∞—Ä–∞–π"
    ],
    "–Æ–≥": [
        "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", "–°–æ—á–∏", "–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫", "–ê–Ω–∞–ø–∞", "–ì–µ–ª–µ–Ω–¥–∂–∏–∫"
    ]
}

temp = Gauge('weather_temp', '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –≥–æ—Ä–æ–¥–∞—Ö –†–æ—Å—Å–∏–∏', ['city'])

def generate_weather_data():
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏"""
    for region, city_list in CITIES.items():
        for city in city_list:
            # –†–∞–∑–Ω—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
            if region == "–î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫":
                t = round(random.uniform(-15, 5), 1)
            elif region == "–°–∏–±–∏—Ä—å":
                t = round(random.uniform(-25, -5), 1)
            elif region == "–£—Ä–∞–ª":
                t = round(random.uniform(-20, 0), 1)
            elif region == "–¶–µ–Ω—Ç—Ä":
                t = round(random.uniform(-10, 10), 1)
            elif region == "–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥":
                t = round(random.uniform(-8, 5), 1)
            elif region == "–ö—Ä—ã–º":
                t = round(random.uniform(5, 25), 1)  # –ö—Ä—ã–º —Ç–µ–ø–ª–µ–µ
            else:  # –Æ–≥
                t = round(random.uniform(0, 20), 1)
            
            temp.labels(city=city).set(t)
            print(f"{city}: {t}¬∞C")

print("=" * 60)
print("üåç RUSSIA WEATHER EXPORTER - –í–°–Ø –†–û–°–°–ò–Ø –° –ö–†–´–ú–û–ú")
print("=" * 60)
total_cities = sum(len(cities) for cities in CITIES.values())
print(f"üìç –†–µ–≥–∏–æ–Ω–æ–≤: {len(CITIES)}")
print(f"üèôÔ∏è –ì–æ—Ä–æ–¥–æ–≤: {total_cities}")
print("üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8000...")
print("=" * 60)

start_http_server(8000)

counter = 0
while True:
    counter += 1
    print(f"\nüîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ #{counter}")
    generate_weather_data()
    time.sleep(30)
