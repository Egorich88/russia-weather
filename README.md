# 🇷🇺 Russia Weather Monitoring

## Полный DevOps-проект: Мониторинг погоды в 49 городах России

[![Jenkins](https://img.shields.io/badge/Jenkins-CI%2FCD-red?logo=jenkins)](http://192.168.56.12:8080)
[![Prometheus](https://img.shields.io/badge/Prometheus-Metrics-orange?logo=prometheus)](http://192.168.56.10:9090)
[![Grafana](https://img.shields.io/badge/Grafana-Dashboards-brightgreen?logo=grafana)](http://192.168.56.11:3000)
[![Ansible](https://img.shields.io/badge/Ansible-Automation-blue?logo=ansible)](.)
[![Vagrant](https://img.shields.io/badge/Vagrant-VM%20Management-1563FF?logo=vagrant)](.)

### 📋 Описание проекта
Этот проект представляет собой полностью автоматизированную систему мониторинга погоды. Она разворачивает три виртуальные машины, устанавливает и настраивает на них необходимые сервисы, а также предоставляет готовый дашборд для визуализации температуры в 49 городах России, включая все федеральные округа.

### 🏗️ Архитектура
Система состоит из трех виртуальных машин, развернутых с помощью Vagrant на базе VirtualBox, и управляется через единый Jenkins-оркестратор.
<img width="7528" height="5124" alt="deepseek_mermaid_20260215_a99722" src="https://github.com/user-attachments/assets/dda2964c-0a4b-4548-b5ab-5f06e5d03682" />

┌─────────────────────────────────────────────────────────────────┐
│ VirtualBox Host │
├─────────────────────────────────────────────────────────────────┤
│ │
│ ┌──────────────────┐ ┌──────────────────┐ │
│ │ VM #1 │ │ VM #2 │ │
│ │ Jenkins │ │ Prometheus │ │
│ │ 192.168.56.12 │ │ 192.168.56.10 │ │
│ │ ┌─────────────┐ │ │ ┌─────────────┐ │ │
│ │ │ Jenkins │ │ │ │ Prometheus │ │ │
│ │ │ :8080 │ │ │ │ :9090 │ │ │
│ │ └─────────────┘ │ │ └─────────────┘ │ │
│ └────────┬─────────┘ └────────┬─────────┘ │
│ │ │ │
│ │ Управление деплоем │ Сбор метрик │
│ └───────────┬───────────┘ │ │
│ │ │ │
│ ▼ ▼ │
│ ┌───────────────────────────────────────────────────────┐ │
│ │ VM #3 │ │
│ │ Grafana │ │
│ │ 192.168.56.11 │ │
│ │ ┌─────────────┐ │ │
│ │ │ Grafana │◄─────── Визуализация │ │
│ │ │ :3000 │ │ │
│ │ └─────────────┘ │ │
│ └───────────────────────────────────────────────────────┘ │
│ ▲ │
│ │ │
│ ┌──────┴──────┐ │
│ │ Windows │ │
│ │ Host │ │
│ │ Exporter │ │
│ │ :8000 │ │
│ └─────────────┘ │
└─────────────────────────────────────────────────────────────────┘
<img width="2802" height="1466" alt="deepseek_mermaid_20260215_329634" src="https://github.com/user-attachments/assets/27171a0f-51a5-4d23-a7ed-ea4f6b5dcdce" />
<img width="2051" height="1485" alt="deepseek_mermaid_20260215_c55049" src="https://github.com/user-attachments/assets/9454fb06-8234-4028-80e6-ebbecb101b26" />

text

### ✅ Что сделано
*   **3 виртуальные машины** (Jenkins, Prometheus, Grafana) на Ubuntu 22.04.
*   **Полная автоматизация развертывания** с помощью Vagrant и Ansible.
*   **Jenkins** установлен в Docker на VM1 и настроен как CI/CD-оркестратор.
*   **Prometheus** установлен на VM2 для сбора и хранения метрик.
*   **Grafana** установлена на VM3, настроена на работу с Prometheus, и доступна по HTTPS.
*   **Weather Exporter** на Python, запущенный в Docker на хосте, генерирует данные о температуре для 49 городов.
*   **Дашборд в Grafana** с таблицами по всем регионам и общей статистикой.
*   **Мониторинг 49 городов** во всех регионах России, включая Крым.

### 🗺️ Список городов (49)
*   **Дальний Восток (9):** Петропавловск-Камчатский, Владивосток, Хабаровск, Южно-Сахалинск, Магадан, Анадырь, Комсомольск-на-Амуре, Благовещенск, Тында.
*   **Сибирь (8):** Новосибирск, Красноярск, Иркутск, Омск, Томск, Барнаул, Кемерово, Якутск.
*   **Урал (6):** Екатеринбург, Челябинск, Пермь, Уфа, Тюмень, Магнитогорск.
*   **Центр (8):** Москва, Санкт-Петербург, Нижний Новгород, Казань, Самара, Ростов-на-Дону, Воронеж, Волгоград.
*   **Северо-Запад (3):** Калининград, Мурманск, Архангельск.
*   **Крым (10):** Симферополь, Севастополь, Керчь, Ялта, Феодосия, Евпатория, Алушта, Саки, Джанкой, Бахчисарай.
*   **Юг (5):** Краснодар, Сочи, Новороссийск, Анапа, Геленджик.
*   **Всего: 49 городов.**

### 🚀 Быстрый старт
1.  **Клонировать репозиторий:**
    ```bash
    git clone https://github.com/Egorich88/russia-weather.git
    cd russia-weather
    ```
2.  **Запустить инфраструктуру:**
    ```bash
    vagrant up
    ```
3.  **Настроить Jenkins:**
    *   Открыть `http://192.168.56.12:8080`, ввести пароль из консоли, установить плагины, создать пользователя.
    *   Добавить в Jenkins SSH-ключ (`ansible-ssh-key`).
4.  **Запустить деплой:**
    *   В Jenkins создать задачу и запустить pipeline для установки Prometheus и Grafana.
5.  **Запустить Weather Exporter:**
    *   На хосте (не в VM) выполнить:
    ```bash
    cd exporter
    docker build -t weather-exporter .
    docker run -d -p 8000:8000 --name weather-exporter --restart always weather-exporter
    ```
6.  **Открыть дашборд:**
    *   Перейти в Grafana по адресу `https://192.168.56.11:3000` (логин `admin`, пароль `admin`).

### 📊 Доступ к сервисам
| Сервис | Адрес | Логин | Пароль | Примечание |
|--------|-------|-------|--------|------------|
| **Jenkins** | http://192.168.56.12:8080 | `admin` | ваш пароль | |
| **Prometheus** | http://192.168.56.10:9090 | - | - | Будут настройки HTTPS |
| **Grafana** | **https://192.168.56.11:3000** | `admin` | `admin` | **HTTPS включен** |
| **Exporter** | http://192.168.56.1:8000/metrics | - | - | Отдает метрики |

### 🛠️ Технологический стек
*   **Виртуализация:** VirtualBox, Vagrant
*   **CI/CD:** Jenkins (в Docker)
*   **Автоматизация:** Ansible
*   **Мониторинг:** Prometheus
*   **Визуализация:** Grafana (с HTTPS)
*   **Экспортер:** Python, Docker
*   **ОС:** Ubuntu 22.04 LTS

### 🔮 Планы по развитию
*   [ ] Подключение к реальному API погоды (OpenWeatherMap).
*   [ ] Настройка HTTPS для Jenkins и Prometheus.
*   [ ] Добавление уведомлений в Telegram при аномалиях.
*   [ ] Автоматический деплой при изменениях в Git.
*   [ ] Интеграция с Kubernetes.

### 🤝 Как помочь проекту
*   Поставьте звезду на GitHub.
*   Предложите улучшения.
*   Сообщите об ошибках.

---

**© 2026 | DevOps-проект Egorich88** 🇷🇺
